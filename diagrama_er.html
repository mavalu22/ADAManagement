<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Diagrama ER — ADAManagement</title>
  <style>
    body {
      font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
      background: #f0fdf4;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      margin: 0;
      padding: 24px;
      box-sizing: border-box;
    }
  </style>
</head>
<body>
<svg width="1020" height="700" xmlns="http://www.w3.org/2000/svg"
     style="filter: drop-shadow(0 6px 24px rgba(0,0,0,0.13)); border-radius: 14px; display:block;">

  <defs>
    <marker id="crow1" markerWidth="12" markerHeight="12" refX="10" refY="6" orient="auto">
      <!-- arrowhead -->
      <path d="M 0,0 L 10,6 L 0,12" fill="none" stroke="#374151" stroke-width="1.5"/>
    </marker>
    <marker id="crowN" markerWidth="14" markerHeight="12" refX="2" refY="6" orient="auto">
      <!-- crow's foot (N side) -->
      <path d="M 12,0 L 2,6 M 12,12 L 2,6 M 12,6 L 2,6" fill="none" stroke="#374151" stroke-width="1.5"/>
    </marker>
    <marker id="arr" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#374151"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="1020" height="700" fill="white" rx="14"/>

  <!-- Title -->
  <text x="510" y="36" text-anchor="middle" font-size="17" font-weight="700" fill="#064e3b">Diagrama Entidade-Relacionamento — ADAManagement</text>
  <text x="510" y="55" text-anchor="middle" font-size="11" fill="#6b7280">6 entidades · Relacionamentos 1:N · Chave estrangeira · Soft Delete</text>

  <!-- ─────────────────────────────────── -->
  <!-- Helpers: entity box macro          -->
  <!-- ─────────────────────────────────── -->

  <!-- ╔══════════════╗ -->
  <!-- ║    users     ║ -->
  <!-- ╠══════════════╣ -->
  <!-- top-left: x=30, y=72 -->
  <rect x="30" y="72" width="195" height="230" rx="8" fill="#ecfdf5" stroke="#059669" stroke-width="2"/>
  <!-- header -->
  <rect x="30" y="72" width="195" height="34" rx="8" fill="#059669"/>
  <rect x="30" y="92" width="195" height="14" fill="#059669"/><!-- square bottom of header -->
  <text x="127" y="94" text-anchor="middle" font-size="13" font-weight="700" fill="white">users</text>
  <!-- PK badge -->
  <rect x="35" y="112" width="28" height="16" rx="3" fill="#d97706"/>
  <text x="49" y="124" text-anchor="middle" font-size="8.5" font-weight="700" fill="white">PK</text>
  <text x="165" y="124" text-anchor="middle" font-size="10" fill="#374151">id (uint)</text>
  <!-- rows -->
  <line x1="30" y1="132" x2="225" y2="132" stroke="#d1fae5" stroke-width="1"/>
  <text x="127" y="145" text-anchor="middle" font-size="10" fill="#374151">name (string)</text>
  <line x1="30" y1="150" x2="225" y2="150" stroke="#d1fae5" stroke-width="1"/>
  <text x="127" y="163" text-anchor="middle" font-size="10" fill="#374151">email (string · UNIQUE)</text>
  <line x1="30" y1="168" x2="225" y2="168" stroke="#d1fae5" stroke-width="1"/>
  <text x="127" y="181" text-anchor="middle" font-size="10" fill="#374151">password (string · BCrypt)</text>
  <line x1="30" y1="186" x2="225" y2="186" stroke="#d1fae5" stroke-width="1"/>
  <text x="127" y="199" text-anchor="middle" font-size="10" fill="#374151">role ('admin' | 'user')</text>
  <line x1="30" y1="204" x2="225" y2="204" stroke="#d1fae5" stroke-width="1"/>
  <text x="127" y="217" text-anchor="middle" font-size="10" fill="#6b7280">created_at (timestamp)</text>
  <line x1="30" y1="222" x2="225" y2="222" stroke="#d1fae5" stroke-width="1"/>
  <text x="127" y="235" text-anchor="middle" font-size="10" fill="#6b7280">updated_at (timestamp)</text>
  <line x1="30" y1="240" x2="225" y2="240" stroke="#d1fae5" stroke-width="1"/>
  <text x="127" y="253" text-anchor="middle" font-size="10" fill="#6b7280">deleted_at (timestamp)</text>
  <!-- note -->
  <rect x="32" y="262" width="191" height="34" rx="4" fill="#fef3c7"/>
  <text x="127" y="275" text-anchor="middle" font-size="8.5" font-weight="600" fill="#92400e">⚠ ID=1: Admin Master</text>
  <text x="127" y="288" text-anchor="middle" font-size="8.5" fill="#92400e">Protegido contra deleção</text>

  <!-- ╔══════════════╗ -->
  <!-- ║   courses    ║ -->
  <!-- x=30, y=340 -->
  <rect x="30" y="340" width="195" height="148" rx="8" fill="#ecfdf5" stroke="#059669" stroke-width="2"/>
  <rect x="30" y="340" width="195" height="34" rx="8" fill="#059669"/>
  <rect x="30" y="360" width="195" height="14" fill="#059669"/>
  <text x="127" y="362" text-anchor="middle" font-size="13" font-weight="700" fill="white">courses</text>
  <rect x="35" y="380" width="28" height="16" rx="3" fill="#d97706"/>
  <text x="49"  y="392" text-anchor="middle" font-size="8.5" font-weight="700" fill="white">PK</text>
  <text x="165" y="392" text-anchor="middle" font-size="10" fill="#374151">id (uint)</text>
  <line x1="30" y1="400" x2="225" y2="400" stroke="#d1fae5" stroke-width="1"/>
  <text x="127" y="413" text-anchor="middle" font-size="10" fill="#374151">code (int · UNIQUE)</text>
  <line x1="30" y1="418" x2="225" y2="418" stroke="#d1fae5" stroke-width="1"/>
  <text x="127" y="431" text-anchor="middle" font-size="10" fill="#374151">name (string)</text>
  <line x1="30" y1="436" x2="225" y2="436" stroke="#d1fae5" stroke-width="1"/>
  <text x="127" y="449" text-anchor="middle" font-size="10" fill="#374151">coordinator (string)</text>
  <line x1="30" y1="454" x2="225" y2="454" stroke="#d1fae5" stroke-width="1"/>
  <text x="127" y="478" text-anchor="middle" font-size="9" fill="#6b7280">Populado via importação CSV/XLSX</text>

  <!-- ╔══════════════╗ -->
  <!-- ║   students   ║ -->
  <!-- x=320, y=180 -->
  <rect x="320" y="180" width="220" height="220" rx="8" fill="#ecfdf5" stroke="#059669" stroke-width="2"/>
  <rect x="320" y="180" width="220" height="34" rx="8" fill="#047857"/>
  <rect x="320" y="200" width="220" height="14" fill="#047857"/>
  <text x="430" y="202" text-anchor="middle" font-size="13" font-weight="700" fill="white">students</text>
  <rect x="325" y="220" width="28" height="16" rx="3" fill="#d97706"/>
  <text x="339"  y="232" text-anchor="middle" font-size="8.5" font-weight="700" fill="white">PK</text>
  <text x="455"  y="232" text-anchor="middle" font-size="10" fill="#374151">id (uint)</text>
  <line x1="320" y1="240" x2="540" y2="240" stroke="#d1fae5" stroke-width="1"/>
  <text x="430" y="253" text-anchor="middle" font-size="10" fill="#374151">registration (string · UNIQUE)</text>
  <line x1="320" y1="258" x2="540" y2="258" stroke="#d1fae5" stroke-width="1"/>
  <text x="430" y="271" text-anchor="middle" font-size="10" fill="#374151">name (string)</text>
  <line x1="320" y1="276" x2="540" y2="276" stroke="#d1fae5" stroke-width="1"/>
  <text x="430" y="289" text-anchor="middle" font-size="10" fill="#374151">entry_year (int)</text>
  <line x1="320" y1="294" x2="540" y2="294" stroke="#d1fae5" stroke-width="1"/>
  <text x="430" y="307" text-anchor="middle" font-size="10" fill="#374151">entry_period (string)</text>
  <line x1="320" y1="312" x2="540" y2="312" stroke="#d1fae5" stroke-width="1"/>
  <text x="430" y="325" text-anchor="middle" font-size="10" fill="#374151">quota_type (string)</text>
  <line x1="320" y1="330" x2="540" y2="330" stroke="#d1fae5" stroke-width="1"/>
  <!-- FK -->
  <rect x="325" y="336" width="22" height="16" rx="3" fill="#0284c7"/>
  <text x="336"  y="348" text-anchor="middle" font-size="8.5" font-weight="700" fill="white">FK</text>
  <text x="455"  y="348" text-anchor="middle" font-size="10" fill="#374151">course_id → courses.id</text>
  <line x1="320" y1="354" x2="540" y2="354" stroke="#d1fae5" stroke-width="1"/>
  <text x="430" y="378" text-anchor="middle" font-size="9" fill="#6b7280">Chave natural: registration (matrícula)</text>

  <!-- ╔══════════════╗ -->
  <!-- ║  semesters   ║ -->
  <!-- x=620, y=72 -->
  <rect x="620" y="72" width="200" height="128" rx="8" fill="#ecfdf5" stroke="#059669" stroke-width="2"/>
  <rect x="620" y="72" width="200" height="34" rx="8" fill="#059669"/>
  <rect x="620" y="92" width="200" height="14" fill="#059669"/>
  <text x="720" y="94" text-anchor="middle" font-size="13" font-weight="700" fill="white">semesters</text>
  <rect x="625" y="112" width="28" height="16" rx="3" fill="#d97706"/>
  <text x="639"  y="124" text-anchor="middle" font-size="8.5" font-weight="700" fill="white">PK</text>
  <text x="755"  y="124" text-anchor="middle" font-size="10" fill="#374151">id (uint)</text>
  <line x1="620" y1="132" x2="820" y2="132" stroke="#d1fae5" stroke-width="1"/>
  <text x="720" y="145" text-anchor="middle" font-size="10" fill="#374151">code (string · UNIQUE)</text>
  <line x1="620" y1="150" x2="820" y2="150" stroke="#d1fae5" stroke-width="1"/>
  <rect x="622" y="158" width="196" height="34" rx="4" fill="#f0fdf4"/>
  <text x="720" y="171" text-anchor="middle" font-size="8.5" fill="#6b7280">Formato: "YYYY/P" (ex.: "2025/1")</text>
  <text x="720" y="184" text-anchor="middle" font-size="8.5" fill="#6b7280">Criado automaticamente na importação</text>

  <!-- ╔══════════════════════╗ -->
  <!-- ║  academic_records   ║ -->
  <!-- x=580, y=280 -->
  <rect x="570" y="265" width="260" height="290" rx="8" fill="#ecfdf5" stroke="#059669" stroke-width="2"/>
  <rect x="570" y="265" width="260" height="34" rx="8" fill="#064e3b"/>
  <rect x="570" y="285" width="260" height="14" fill="#064e3b"/>
  <text x="700" y="287" text-anchor="middle" font-size="13" font-weight="700" fill="white">academic_records</text>
  <rect x="575" y="305" width="28" height="16" rx="3" fill="#d97706"/>
  <text x="589"  y="317" text-anchor="middle" font-size="8.5" font-weight="700" fill="white">PK</text>
  <text x="715"  y="317" text-anchor="middle" font-size="10" fill="#374151">id (uint)</text>
  <line x1="570" y1="325" x2="830" y2="325" stroke="#d1fae5" stroke-width="1"/>
  <!-- FK 1 -->
  <rect x="575" y="331" width="22" height="16" rx="3" fill="#0284c7"/>
  <text x="586"  y="343" text-anchor="middle" font-size="8.5" font-weight="700" fill="white">FK</text>
  <text x="715"  y="343" text-anchor="middle" font-size="10" fill="#374151">student_id → students.id</text>
  <line x1="570" y1="351" x2="830" y2="351" stroke="#d1fae5" stroke-width="1"/>
  <!-- FK 2 -->
  <rect x="575" y="357" width="22" height="16" rx="3" fill="#0284c7"/>
  <text x="586"  y="369" text-anchor="middle" font-size="8.5" font-weight="700" fill="white">FK</text>
  <text x="715"  y="369" text-anchor="middle" font-size="10" fill="#374151">semester_id → semesters.id</text>
  <line x1="570" y1="377" x2="830" y2="377" stroke="#d1fae5" stroke-width="1"/>
  <text x="700" y="390" text-anchor="middle" font-size="10" fill="#374151">status (string)</text>
  <line x1="570" y1="395" x2="830" y2="395" stroke="#d1fae5" stroke-width="1"/>
  <text x="700" y="408" text-anchor="middle" font-size="10" fill="#374151">status_detail (string)</text>
  <line x1="570" y1="413" x2="830" y2="413" stroke="#d1fae5" stroke-width="1"/>
  <text x="700" y="426" text-anchor="middle" font-size="10" fill="#374151">integralized_hours (int)</text>
  <line x1="570" y1="431" x2="830" y2="431" stroke="#d1fae5" stroke-width="1"/>
  <text x="700" y="444" text-anchor="middle" font-size="10" fill="#374151">total_hours (int)</text>
  <line x1="570" y1="449" x2="830" y2="449" stroke="#d1fae5" stroke-width="1"/>
  <text x="700" y="462" text-anchor="middle" font-size="10" fill="#374151">pending_obligatory (int)</text>
  <line x1="570" y1="467" x2="830" y2="467" stroke="#d1fae5" stroke-width="1"/>
  <text x="700" y="480" text-anchor="middle" font-size="10" fill="#374151">semesters_no_hours (int)</text>
  <line x1="570" y1="485" x2="830" y2="485" stroke="#d1fae5" stroke-width="1"/>
  <text x="700" y="498" text-anchor="middle" font-size="10" fill="#374151">locks (int)</text>
  <line x1="570" y1="503" x2="830" y2="503" stroke="#d1fae5" stroke-width="1"/>
  <!-- UNIQUE constraint badge -->
  <rect x="572" y="509" width="256" height="38" rx="4" fill="#fef3c7"/>
  <text x="700" y="522" text-anchor="middle" font-size="8.5" font-weight="700" fill="#92400e">UNIQUE (student_id, semester_id)</text>
  <text x="700" y="535" text-anchor="middle" font-size="8.5" fill="#92400e">Um registro por aluno por semestre</text>

  <!-- ╔══════════════════╗ -->
  <!-- ║ student_actions  ║ -->
  <!-- x=740, y=590 — moved up and to the left a bit -->
  <rect x="720" y="565" width="265" height="118" rx="8" fill="#ecfdf5" stroke="#059669" stroke-width="2"/>
  <rect x="720" y="565" width="265" height="34" rx="8" fill="#7c3aed"/>
  <rect x="720" y="585" width="265" height="14" fill="#7c3aed"/>
  <text x="852" y="587" text-anchor="middle" font-size="12" font-weight="700" fill="white">student_actions</text>
  <rect x="725" y="605" width="28" height="16" rx="3" fill="#d97706"/>
  <text x="739"  y="617" text-anchor="middle" font-size="8.5" font-weight="700" fill="white">PK</text>
  <text x="867"  y="617" text-anchor="middle" font-size="10" fill="#374151">id (uint)</text>
  <line x1="720" y1="625" x2="985" y2="625" stroke="#d1fae5" stroke-width="1"/>
  <rect x="725" y="631" width="22" height="16" rx="3" fill="#0284c7"/>
  <text x="736"  y="643" text-anchor="middle" font-size="8.5" font-weight="700" fill="white">FK</text>
  <text x="867"  y="643" text-anchor="middle" font-size="10" fill="#374151">student_id · semester_id</text>
  <line x1="720" y1="651" x2="985" y2="651" stroke="#d1fae5" stroke-width="1"/>
  <text x="852" y="664" text-anchor="middle" font-size="10" fill="#374151">action_date · description (≤500)</text>
  <line x1="720" y1="669" x2="985" y2="669" stroke="#d1fae5" stroke-width="1"/>
  <text x="852" y="679" text-anchor="middle" font-size="10" fill="#374151">response_date (nullable) · deleted_at</text>

  <!-- ════════════════════════════════════ -->
  <!-- RELATIONSHIP LINES                  -->
  <!-- ════════════════════════════════════ -->

  <!-- courses (1) → students (N) : elbow right edge of courses to left edge of students -->
  <!-- courses right edge: (225, 414) approx center of courses box -->
  <!-- students left edge: (320, 290) approx center of students box -->
  <path d="M 225,414 L 272,414 L 272,290 L 320,290" fill="none" stroke="#374151" stroke-width="1.8" marker-end="url(#arr)"/>
  <text x="248" y="405" text-anchor="middle" font-size="9.5" font-weight="700" fill="#059669">1</text>
  <text x="310" y="285" text-anchor="middle" font-size="9.5" font-weight="700" fill="#059669">N</text>

  <!-- students (1) → academic_records (N): bottom of students to top-left of academic_records -->
  <!-- students bottom-center: (430, 400) -->
  <!-- academic_records left edge center: (570, 400) -->
  <path d="M 540,280 L 560,280 L 560,340 L 570,340" fill="none" stroke="#374151" stroke-width="1.8" marker-end="url(#arr)"/>
  <text x="548" y="275" text-anchor="middle" font-size="9.5" font-weight="700" fill="#059669">1</text>
  <text x="580" y="335" text-anchor="middle" font-size="9.5" font-weight="700" fill="#059669">N</text>

  <!-- semesters (1) → academic_records (N): bottom of semesters to top of academic_records -->
  <!-- semesters bottom-center: (720, 200) -->
  <!-- academic_records top-center: (700, 265) -->
  <path d="M 720,200 L 720,240 L 700,240 L 700,265" fill="none" stroke="#374151" stroke-width="1.8" marker-end="url(#arr)"/>
  <text x="710" y="218" text-anchor="middle" font-size="9.5" font-weight="700" fill="#059669">1</text>
  <text x="690" y="275" text-anchor="middle" font-size="9.5" font-weight="700" fill="#059669">N</text>

  <!-- students (1) → student_actions (N): bottom of students → down below academic_records → left edge of student_actions -->
  <path d="M 430,400 L 430,600 L 720,600" fill="none" stroke="#374151" stroke-width="1.8" marker-end="url(#arr)"/>
  <text x="442" y="412" text-anchor="middle" font-size="9.5" font-weight="700" fill="#7c3aed">1</text>
  <text x="712" y="594" text-anchor="middle" font-size="9.5" font-weight="700" fill="#7c3aed">N</text>

  <!-- semesters (1) → student_actions (N): right edge of semesters to right of student_actions -->
  <path d="M 820,136 L 990,136 L 990,623 L 985,623" fill="none" stroke="#374151" stroke-width="1.8" stroke-dasharray="6,3" marker-end="url(#arr)"/>
  <text x="824" y="130" text-anchor="start" font-size="9.5" font-weight="700" fill="#7c3aed">1</text>
  <text x="985" y="618" text-anchor="end" font-size="9.5" font-weight="700" fill="#7c3aed">N</text>

  <!-- Legend -->
  <rect x="30" y="600" width="510" height="72" rx="8" fill="#f9fafb" stroke="#d1d5db" stroke-width="1"/>
  <text x="285" y="618" text-anchor="middle" font-size="10" font-weight="700" fill="#374151">Legenda</text>

  <rect x="42" y="626" width="22" height="14" rx="3" fill="#d97706"/>
  <text x="55" y="637" text-anchor="middle" font-size="8" fill="white" font-weight="700">PK</text>
  <text x="130" y="637" text-anchor="middle" font-size="9" fill="#374151">Chave Primária</text>

  <rect x="42" y="648" width="22" height="14" rx="3" fill="#0284c7"/>
  <text x="55" y="659" text-anchor="middle" font-size="8" fill="white" font-weight="700">FK</text>
  <text x="130" y="659" text-anchor="middle" font-size="9" fill="#374151">Chave Estrangeira</text>

  <line x1="218" y1="633" x2="258" y2="633" stroke="#374151" stroke-width="1.8" marker-end="url(#arr)"/>
  <text x="310" y="637" text-anchor="middle" font-size="9" fill="#374151">Relação 1:N (sólida)</text>

  <line x1="218" y1="655" x2="258" y2="655" stroke="#374151" stroke-width="1.8" stroke-dasharray="5,3" marker-end="url(#arr)"/>
  <text x="310" y="659" text-anchor="middle" font-size="9" fill="#374151">Relação 1:N (opcional)</text>

  <rect x="395" y="626" width="135" height="14" rx="3" fill="#fef3c7" stroke="#d97706" stroke-width="1"/>
  <text x="462" y="637" text-anchor="middle" font-size="8.5" fill="#92400e">⚠ Regra de negócio</text>

  <text x="462" y="657" text-anchor="middle" font-size="8.5" fill="#6b7280">Soft Delete: deleted_at (GORM)</text>

</svg>
</body>
</html>
